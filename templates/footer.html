<script>
const audioPlayer = document.getElementById('audioPlayer');
const playPauseBtn = document.getElementById('playPauseBtn');
const currentTitle = document.getElementById('current-title');
const currentArtist = document.getElementById('current-artist');
const playerArt = document.getElementById('player-art');
const progressSlider = document.getElementById('progressSlider');
const currentTimeElem = document.getElementById('currentTime');
const durationTimeElem = document.getElementById('durationTime');
const volumeSlider = document.getElementById('volumeSlider');

let currentSong = null;

// Play song when clicking a song card
document.querySelectorAll('.song-card').forEach(card => {
    card.addEventListener('click', () => {
        const audioUrl = card.getAttribute('data-audio');
        const title = card.getAttribute('data-title');
        const artist = card.querySelector('p').textContent;
        const art = card.querySelector('img').src;

        // Set current song and update player
        currentSong = audioUrl;
        audioPlayer.src = audioUrl;
        audioPlayer.play();

        currentTitle.textContent = title;
        currentArtist.textContent = artist;
        playerArt.src = art;

        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
    });
});

// Play/Pause toggle
playPauseBtn.addEventListener('click', () => {
    if (audioPlayer.paused) {
        audioPlayer.play();
        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
    } else {
        audioPlayer.pause();
        playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
    }
});

// Update progress slider as song plays
audioPlayer.addEventListener('timeupdate', () => {
    const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
    progressSlider.value = progressPercent || 0;

    // Display time
    let mins = Math.floor(audioPlayer.currentTime / 60);
    let secs = Math.floor(audioPlayer.currentTime % 60);
    if (secs < 10) secs = '0' + secs;
    currentTimeElem.textContent = `${mins}:${secs}`;

    let dMins = Math.floor(audioPlayer.duration / 60) || 0;
    let dSecs = Math.floor(audioPlayer.duration % 60) || 0;
    if (dSecs < 10) dSecs = '0' + dSecs;
    durationTimeElem.textContent = `${dMins}:${dSecs}`;
});

// Seek song using slider
progressSlider.addEventListener('input', () => {
    if (audioPlayer.duration) {
        audioPlayer.currentTime = (progressSlider.value / 100) * audioPlayer.duration;
    }
});

// Volume control
volumeSlider.addEventListener('input', () => {
    audioPlayer.volume = volumeSlider.value / 100;
});
</script>
